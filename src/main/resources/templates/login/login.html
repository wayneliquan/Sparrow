<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>数据平台管理系统</title>
  <!-- bootstrap -->
  <link rel="stylesheet" href="../../static/css/bootstrap/bootstrap.min.css" th:href="@{/css/bootstrap/bootstrap.min.css}" />

  <script type="text/javascript" src="../../static/js/jquery/jquery-3.2.1.min.js" th:src="@{/js/jquery/jquery-3.2.1.min.js}"></script>
  <script type="text/javascript" src="../../static/js/jquery/jquery.validate.min.js" th:src="@{/js/jquery/jquery.validate.min.js}"></script>
  <script type="text/javascript" src="../../static/js/jquery/jquery.form.min.js" th:src="@{/js/jquery/jquery.form.min.js}"></script>
  <script type="text/javascript" src="../../static/js/bootstrap/bootstrap.min.js" th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
  <script src="//cdn.bootcss.com/blueimp-md5/2.8.0/js/md5.js"></script>
</head>
<body>
<div class="container">
  <div th:if="${param.error}" class="container text-center">
    <span class="alert-danger">Username and password not matched, please try again!</span>
  </div>
  <div th:if="${param.code}" class="container text-center">
    <span class="alert-warning">captcha code not matched, please try again!</span>
  </div>
  <form class="form-horizontal" role="form" th:action="@{/login}" name="f" method="post">
    <div class="form-group">
      <label for="username" class="col-lg-3 control-label">用户名： </label>
      <div class="col-lg-5">
        <input type="text" name="username" class="form-control" id="username" placeholder="请输入您的用户名"/>
      </div>
    </div>
    <div class="form-group">
      <label for="password" class="col-lg-3 control-label">密码： </label>
      <div class="col-lg-5">
        <input type="password" name="password" class="form-control" id="password" placeholder="请输入您的密码"/>
      </div>
    </div>
    <div class="form-group">
      <label for="captcha" class="col-md-3 control-label">验证码： </label>
      <div class="col-md-2">
        <input type="text" name="captcha" class="form-control" id="captcha" placeholder="请输入验证码"/>
      </div>
      <img style="border: 1px solid #bac5d4; cursor: pointer; border-radius: 5px; height: 34px; margin-left: 20px;"
           alt="验证码" title="点击刷新" src="/captcha" onclick="this.src='/captcha?d='+Math.random();"/>
    </div>
    <div class="form-group">
      <div class="col-lg-offset-3 col-lg-10">
        <div class="checkbox">
          <label>
            <input id="remember_me" name="remember-me" type="checkbox"/>记住密码
          </label>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-lg-offset-3 col-lg-9">
        <button type="submit" class="btn btn-default">登 入</button>
      </div>
    </div>
  </form>
</div>
<script>
    $("form").validate({
        submitHandler: function(form) {
            var password = $("#password").val();
            $("#password").val(md5(password));
//            $(form).ajaxSubmit({
//                success: function (msg) {
//                    alert(msg.message);
//                    $("form")[0].reset();
//                }
//            });
            form.submit();
        },
        rules:{
            username: "required",
            password: "required"
        },
        onkeyup: false,
        onclick: false,
//        errorElement: 'span',
        focusInvalid: false,
        errorClass: 'help-block',
        highlight: function (element) {
            $(element).closest('.form-group').addClass('has-error');
        },

        success: function (label) {
            label.closest('.form-group').removeClass('has-error');
            label.remove();
        },

        errorPlacement: function (error, element) {
            element.parent('div').append(error);
        }
    });
</script>
</body>
</html>